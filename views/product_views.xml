<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
        SOBRESCRIBIMOS la vista original "product.product_view_search_catalog"
        para añadir nuestro cambio y el searchpanel.
    -->
    <record id="product.product_view_search_catalog" model="ir.ui.view">
        <field name="name">product.view.search.catalog.custom.with.panel</field>
        <field name="model">product.product</field>
        <field name="arch" type="xml">
            <!--
                Añadimos disable_custom_filters="1" a la etiqueta <search>
            -->
            <search string="Product" disable_custom_filters="1">
                <!-- Campos de búsqueda originales -->
                <field name="name" string="Product" filter_domain="['|', '|', ('default_code', 'ilike', self), ('name', 'ilike', self), ('barcode', 'ilike', self)]"/>
                <field name="categ_id" filter_domain="[('categ_id', 'child_of', raw_value)]"/>
                <field name="product_template_attribute_value_ids" groups="product.group_product_variant"/>
                <field name="product_tmpl_id" string="Product Template"/>

                <!-- 
                    AQUÍ AÑADIMOS TU SEARCHPANEL 
                -->
                <searchpanel>
                    <field name="categ_id" string="Product Category" icon="fa-th-list" enable_counters="1"/>
                    <field name="product_template_attribute_value_ids" string="Attributes" icon="fa-th-list" enable_counters="1" select="multi"/>
                </searchpanel>

            </search>
        </field>
    </record>
</odoo>